\hypertarget{class_direct_sound}{}\section{Direct\+Sound 클래스 참조}
\label{class_direct_sound}\index{Direct\+Sound@{Direct\+Sound}}


Direct\+Sound에 대한 상속 다이어그램 \+: \nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=171pt]{class_direct_sound__inherit__graph}
\end{center}
\end{figure}


Direct\+Sound에 대한 협력 다이어그램\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=171pt]{class_direct_sound__coll__graph}
\end{center}
\end{figure}
\subsection*{Public 멤버 함수}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_direct_sound_a79b2ba458690d888eaeee8b047fac5ca}{Direct\+Sound}} ()
\item 
virtual \mbox{\hyperlink{class_direct_sound_af16e30aa30f5c83d614184010ff3ddc8}{$\sim$\+Direct\+Sound}} ()
\item 
bool \mbox{\hyperlink{class_direct_sound_a006583b3b3c1b16ca4c54bf9a6141fb9}{init}} ()
\item 
void \mbox{\hyperlink{class_direct_sound_a33ee46c99ddf8f06bd6605ec14798f4b}{pause}} ()
\item 
void \mbox{\hyperlink{class_direct_sound_aa947e57a1a67df3a609cd403b8c97bb8}{reset}} ()
\item 
void \mbox{\hyperlink{class_direct_sound_a529b060d31bb252968bc9a387a7dc9ad}{resume}} ()
\item 
void \mbox{\hyperlink{class_direct_sound_a2e2a78f3a6719920fb2a9dfc48e4b1db}{write}} ()
\end{DoxyCompactItemize}


\subsection{상세한 설명}


Direct\+Sound.\+cpp 파일의 39 번째 라인에서 정의되었습니다.



\subsection{생성자 \& 소멸자 문서화}
\mbox{\Hypertarget{class_direct_sound_a79b2ba458690d888eaeee8b047fac5ca}\label{class_direct_sound_a79b2ba458690d888eaeee8b047fac5ca}} 
\index{Direct\+Sound@{Direct\+Sound}!Direct\+Sound@{Direct\+Sound}}
\index{Direct\+Sound@{Direct\+Sound}!Direct\+Sound@{Direct\+Sound}}
\subsubsection{\texorpdfstring{Direct\+Sound()}{DirectSound()}}
{\footnotesize\ttfamily Direct\+Sound\+::\+Direct\+Sound (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Direct\+Sound.\+cpp 파일의 61 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
62 \{
63     CoInitialize( \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} );
64     
65     pDirectSound  = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
66     dsbPrimary    = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
67     dsbSecondary  = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
68     dsbNotify     = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
69     dsbEvent      = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
70 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_direct_sound_af16e30aa30f5c83d614184010ff3ddc8}\label{class_direct_sound_af16e30aa30f5c83d614184010ff3ddc8}} 
\index{Direct\+Sound@{Direct\+Sound}!````~Direct\+Sound@{$\sim$\+Direct\+Sound}}
\index{````~Direct\+Sound@{$\sim$\+Direct\+Sound}!Direct\+Sound@{Direct\+Sound}}
\subsubsection{\texorpdfstring{$\sim$\+Direct\+Sound()}{~DirectSound()}}
{\footnotesize\ttfamily Direct\+Sound\+::$\sim$\+Direct\+Sound (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



Direct\+Sound.\+cpp 파일의 73 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
74 \{
75     \textcolor{keywordflow}{if}(\mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a761be1e36182d12710a199a50c0df020}{aviRecorder}}) \{
76         \textcolor{keyword}{delete} \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a761be1e36182d12710a199a50c0df020}{aviRecorder}};
77         \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a761be1e36182d12710a199a50c0df020}{aviRecorder}} = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
78         \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a3b3857d94f1df7cf3b722ad494547324}{aviFrameNumber}} = 0;
79     \}
80     
81     \textcolor{keywordflow}{if}(\mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae4be99a1a898dc5a3fceed0edeb0c1b0}{soundRecording}}) \{
82         \textcolor{keywordflow}{if}(\mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae263135c638f224f26d2f2bfbd069840}{soundRecorder}}) \{
83             \textcolor{keyword}{delete} \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae263135c638f224f26d2f2bfbd069840}{soundRecorder}};
84             \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae263135c638f224f26d2f2bfbd069840}{soundRecorder}} = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
85         \}
86         \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae4be99a1a898dc5a3fceed0edeb0c1b0}{soundRecording}} = \textcolor{keyword}{false};
87     \}
88     
89     \textcolor{keywordflow}{if}(dsbNotify) \{
90         dsbNotify->Release();
91         dsbNotify = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
92     \}
93     
94     \textcolor{keywordflow}{if}(dsbEvent) \{
95         CloseHandle(dsbEvent);
96         dsbEvent = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
97     \}
98     
99     \textcolor{keywordflow}{if}(pDirectSound) \{
100         \textcolor{keywordflow}{if}(dsbPrimary) \{
101             dsbPrimary->Release();
102             dsbPrimary = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
103         \}
104 
105         \textcolor{keywordflow}{if}(dsbSecondary) \{
106             dsbSecondary->Release();
107             dsbSecondary = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
108         \}
109         
110         pDirectSound->Release();
111         pDirectSound = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
112     \}
113     
114     CoUninitialize();
115 \}
\end{DoxyCode}


\subsection{멤버 함수 문서화}
\mbox{\Hypertarget{class_direct_sound_a006583b3b3c1b16ca4c54bf9a6141fb9}\label{class_direct_sound_a006583b3b3c1b16ca4c54bf9a6141fb9}} 
\index{Direct\+Sound@{Direct\+Sound}!init@{init}}
\index{init@{init}!Direct\+Sound@{Direct\+Sound}}
\subsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily bool Direct\+Sound\+::init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



\mbox{\hyperlink{class_i_sound_ac14f05f2d5050cfefa4133099d9f656e}{I\+Sound}}를 구현.



Direct\+Sound.\+cpp 파일의 118 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
119 \{
120     HRESULT hr;
121     DWORD freq;
122     DSBUFFERDESC dsbdesc;
123     \textcolor{keywordtype}{int} \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}};
124 
125 
126     \textcolor{comment}{// Initialize DirectSound}
127     \textcolor{keywordflow}{if}( FAILED( hr = DirectSoundCreate8( &DSDEVID\_DefaultPlayback, &pDirectSound, 
      \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} ) ) ) \{
128         \mbox{\hyperlink{system_8cpp_a747a9cb8e015a3d45cca636b5bd0fc69}{systemMessage}}( \mbox{\hyperlink{resource_8h_a2cf080a47bcffd2fc082a28d3a81b8ad}{IDS\_CANNOT\_CREATE\_DIRECTSOUND}}, \_T(\textcolor{stringliteral}{"Cannot
       create DirectSound %08x"}), hr );
129         pDirectSound = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
130         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
131     \}
132 
133 
134     \textcolor{keywordflow}{if}( FAILED( hr = pDirectSound->SetCooperativeLevel( \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.m\_pMainWnd->GetSafeHwnd(), 
      DSSCL\_EXCLUSIVE ) ) ) \{
135         \mbox{\hyperlink{system_8cpp_a747a9cb8e015a3d45cca636b5bd0fc69}{systemMessage}}( \mbox{\hyperlink{resource_8h_a4df84f3d1f520bb71a7173be8a29d61b}{IDS\_CANNOT\_SETCOOPERATIVELEVEL}}, \_T(\textcolor{stringliteral}{"
      Cannot SetCooperativeLevel %08x"}), hr );
136         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
137     \}
138 
139 
140     \textcolor{comment}{// Create primary sound buffer}
141     ZeroMemory( &dsbdesc, \textcolor{keyword}{sizeof}(DSBUFFERDESC) );
142     dsbdesc.dwSize = \textcolor{keyword}{sizeof}(DSBUFFERDESC);
143     dsbdesc.dwFlags = DSBCAPS\_PRIMARYBUFFER;
144     \textcolor{keywordflow}{if}( \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a58f89c52283d10a0fcaac8abb7eca524}{dsoundDisableHardwareAcceleration}} ) \{
145         dsbdesc.dwFlags |= DSBCAPS\_LOCSOFTWARE;
146     \}
147 
148     \textcolor{keywordflow}{if}( FAILED( hr = pDirectSound->CreateSoundBuffer( &dsbdesc, &dsbPrimary, 
      \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} ) ) ) \{
149         \mbox{\hyperlink{system_8cpp_a747a9cb8e015a3d45cca636b5bd0fc69}{systemMessage}}(\mbox{\hyperlink{resource_8h_af4f9815b1cc6df2200fd06bcf1eabd9e}{IDS\_CANNOT\_CREATESOUNDBUFFER}}, \_T(\textcolor{stringliteral}{"Cannot
       CreateSoundBuffer %08x"}), hr);
150         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
151     \}
152 
153     \textcolor{keywordflow}{switch}(\mbox{\hyperlink{gb_sound_8cpp_aaeaa156dcc7083863fa6554b8e14854a}{soundQuality}})
154     \{
155     \textcolor{keywordflow}{case} 4:
156         freq = 11025;
157         \textcolor{keywordflow}{break};
158     \textcolor{keywordflow}{case} 2:
159         freq = 22050;
160         \textcolor{keywordflow}{break};
161     \textcolor{keywordflow}{default}:
162         \mbox{\hyperlink{gb_sound_8cpp_aaeaa156dcc7083863fa6554b8e14854a}{soundQuality}} = 1;
163     \textcolor{keywordflow}{case} 1:
164         freq = 44100;
165         \textcolor{keywordflow}{break};
166     \}
167     \mbox{\hyperlink{gb_sound_8cpp_aae9aa4cd368679872bfcb1d851f33019}{soundBufferLen}} = freq*2/30;
168     \mbox{\hyperlink{gb_sound_8cpp_ad35876ee81c2c65072ae9de971b907b8}{soundBufferTotalLen}} = \mbox{\hyperlink{gb_sound_8cpp_aae9aa4cd368679872bfcb1d851f33019}{soundBufferLen}} * 10;
169 
170     ZeroMemory( &wfx, \textcolor{keyword}{sizeof}(WAVEFORMATEX) );
171     wfx.wFormatTag = WAVE\_FORMAT\_PCM;
172     wfx.nChannels = 2;
173     wfx.nSamplesPerSec = freq;
174     wfx.wBitsPerSample = 16;
175     wfx.nBlockAlign = wfx.nChannels * wfx.wBitsPerSample / 8;
176     wfx.nAvgBytesPerSec = wfx.nSamplesPerSec * wfx.nBlockAlign;
177 
178     \textcolor{keywordflow}{if}( FAILED( hr = dsbPrimary->SetFormat( &wfx ) ) ) \{
179         \mbox{\hyperlink{system_8cpp_a747a9cb8e015a3d45cca636b5bd0fc69}{systemMessage}}( \mbox{\hyperlink{resource_8h_ac6c8e6c30d61ae3415b65b4e5b27f465}{IDS\_CANNOT\_SETFORMAT\_PRIMARY}}, \_T(\textcolor{stringliteral}{"
      CreateSoundBuffer(primary) failed %08x"}), hr );
180         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
181     \}
182 
183 
184     \textcolor{comment}{// Create secondary sound buffer}
185     ZeroMemory( &dsbdesc, \textcolor{keyword}{sizeof}(DSBUFFERDESC) );
186     dsbdesc.dwSize = \textcolor{keyword}{sizeof}(DSBUFFERDESC);
187     dsbdesc.dwFlags = DSBCAPS\_GETCURRENTPOSITION2 | DSBCAPS\_CTRLPOSITIONNOTIFY | DSBCAPS\_GLOBALFOCUS;
188     \textcolor{keywordflow}{if}( \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a58f89c52283d10a0fcaac8abb7eca524}{dsoundDisableHardwareAcceleration}} ) \{
189         dsbdesc.dwFlags |= DSBCAPS\_LOCSOFTWARE;
190     \}
191     dsbdesc.dwBufferBytes = \mbox{\hyperlink{gb_sound_8cpp_ad35876ee81c2c65072ae9de971b907b8}{soundBufferTotalLen}};
192     dsbdesc.lpwfxFormat = &wfx;
193 
194     \textcolor{keywordflow}{if}( FAILED( hr = pDirectSound->CreateSoundBuffer( &dsbdesc, &dsbSecondary, 
      \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} ) ) ) \{
195         \mbox{\hyperlink{system_8cpp_a747a9cb8e015a3d45cca636b5bd0fc69}{systemMessage}}( \mbox{\hyperlink{resource_8h_af4f9815b1cc6df2200fd06bcf1eabd9e}{IDS\_CANNOT\_CREATESOUNDBUFFER}}, \_T(\textcolor{stringliteral}{"
      CreateSoundBuffer(secondary) failed %08x"}), hr );
196         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
197     \}
198 
199     \textcolor{keywordflow}{if}( FAILED( hr = dsbSecondary->SetCurrentPosition( 0 ) ) ) \{
200         \mbox{\hyperlink{system_8cpp_a747a9cb8e015a3d45cca636b5bd0fc69}{systemMessage}}( 0, \_T(\textcolor{stringliteral}{"dsbSecondary->SetCurrentPosition failed %08x"}), hr );
201         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
202     \}
203 
204 
205     \textcolor{keywordflow}{if}( !\mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a8a4b36a4e6259df18baf03360aacad4b}{useOldSync}} ) \{
206         \textcolor{keywordflow}{if}( FAILED( hr = dsbSecondary->QueryInterface( IID\_IDirectSoundNotify8, (LPVOID*)&dsbNotify ) ) ) \{
207             dsbEvent = CreateEvent( \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}}, FALSE, FALSE, \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} );
208             DSBPOSITIONNOTIFY notify[10];       
209             \textcolor{keywordflow}{for}( \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} = 0; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} < 10; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++ ) \{
210                 notify[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].dwOffset = \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} * \mbox{\hyperlink{gb_sound_8cpp_aae9aa4cd368679872bfcb1d851f33019}{soundBufferLen}};
211                 notify[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}].hEventNotify = dsbEvent;
212             \}
213 
214             \textcolor{keywordflow}{if}( FAILED( dsbNotify->SetNotificationPositions( 10, notify ) ) ) \{
215                 dsbNotify->Release();
216                 dsbNotify = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
217                 CloseHandle(dsbEvent);
218                 dsbEvent = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
219             \}
220         \}
221     \}
222 
223 
224     \textcolor{comment}{// Play primary buffer}
225     \textcolor{keywordflow}{if}( FAILED( hr = dsbPrimary->Play( 0, 0, DSBPLAY\_LOOPING ) ) ) \{
226         \mbox{\hyperlink{system_8cpp_a747a9cb8e015a3d45cca636b5bd0fc69}{systemMessage}}( \mbox{\hyperlink{resource_8h_a80c9381c79bbb08462801f0fc4293413}{IDS\_CANNOT\_PLAY\_PRIMARY}}, \_T(\textcolor{stringliteral}{"Cannot Play primary
       %08x"}), hr );
227         \textcolor{keywordflow}{return} \textcolor{keyword}{false};
228     \}
229     
230     \mbox{\hyperlink{system_8cpp_a3530cb4502bfecb40d4720c1bd4d83f0}{systemSoundOn}} = \textcolor{keyword}{true};
231     
232     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
233 \}
\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=294pt]{class_direct_sound_a006583b3b3c1b16ca4c54bf9a6141fb9_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_direct_sound_a33ee46c99ddf8f06bd6605ec14798f4b}\label{class_direct_sound_a33ee46c99ddf8f06bd6605ec14798f4b}} 
\index{Direct\+Sound@{Direct\+Sound}!pause@{pause}}
\index{pause@{pause}!Direct\+Sound@{Direct\+Sound}}
\subsubsection{\texorpdfstring{pause()}{pause()}}
{\footnotesize\ttfamily void Direct\+Sound\+::pause (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



\mbox{\hyperlink{class_i_sound_a9fb848e0e31ab8bcd5384b0422855c3d}{I\+Sound}}를 구현.



Direct\+Sound.\+cpp 파일의 236 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
237 \{
238     \textcolor{keywordflow}{if}( dsbSecondary == \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} ) \textcolor{keywordflow}{return};
239     
240     DWORD status;
241 
242     dsbSecondary->GetStatus( &status );
243 
244     \textcolor{keywordflow}{if}( status & DSBSTATUS\_PLAYING ) dsbSecondary->Stop();
245 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_direct_sound_aa947e57a1a67df3a609cd403b8c97bb8}\label{class_direct_sound_aa947e57a1a67df3a609cd403b8c97bb8}} 
\index{Direct\+Sound@{Direct\+Sound}!reset@{reset}}
\index{reset@{reset}!Direct\+Sound@{Direct\+Sound}}
\subsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void Direct\+Sound\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



\mbox{\hyperlink{class_i_sound_a7ca59c529f3abce2dd4ed8d8da243c5e}{I\+Sound}}를 구현.



Direct\+Sound.\+cpp 파일의 248 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
249 \{
250     \textcolor{keywordflow}{if}( dsbSecondary == \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} ) \textcolor{keywordflow}{return};
251     
252     dsbSecondary->Stop();
253     
254     dsbSecondary->SetCurrentPosition( 0 );
255 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_direct_sound_a529b060d31bb252968bc9a387a7dc9ad}\label{class_direct_sound_a529b060d31bb252968bc9a387a7dc9ad}} 
\index{Direct\+Sound@{Direct\+Sound}!resume@{resume}}
\index{resume@{resume}!Direct\+Sound@{Direct\+Sound}}
\subsubsection{\texorpdfstring{resume()}{resume()}}
{\footnotesize\ttfamily void Direct\+Sound\+::resume (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



\mbox{\hyperlink{class_i_sound_a8e0adea68f52a7f0392a3988a558aaf0}{I\+Sound}}를 구현.



Direct\+Sound.\+cpp 파일의 258 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
259 \{
260     \textcolor{keywordflow}{if}( dsbSecondary == \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} ) \textcolor{keywordflow}{return};
261     
262     dsbSecondary->Play( 0, 0, DSBPLAY\_LOOPING );
263 \}
\end{DoxyCode}
\mbox{\Hypertarget{class_direct_sound_a2e2a78f3a6719920fb2a9dfc48e4b1db}\label{class_direct_sound_a2e2a78f3a6719920fb2a9dfc48e4b1db}} 
\index{Direct\+Sound@{Direct\+Sound}!write@{write}}
\index{write@{write}!Direct\+Sound@{Direct\+Sound}}
\subsubsection{\texorpdfstring{write()}{write()}}
{\footnotesize\ttfamily void Direct\+Sound\+::write (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



\mbox{\hyperlink{class_i_sound_ad7913f5fa003c06e8e1a930f760d20e2}{I\+Sound}}를 구현.



Direct\+Sound.\+cpp 파일의 266 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
267 \{
268     \textcolor{keywordflow}{if}(!pDirectSound) \textcolor{keywordflow}{return};
269 
270 
271     HRESULT      hr;
272     DWORD        status = 0;
273     DWORD        play = 0;
274     WAVEFORMATEX format;
275     LPVOID       lpvPtr1;
276     DWORD        dwBytes1 = 0;
277     LPVOID       lpvPtr2;
278     DWORD        dwBytes2 = 0;
279 
280 
281     \textcolor{keywordflow}{if}( \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae4be99a1a898dc5a3fceed0edeb0c1b0}{soundRecording}} ) \{
282         \textcolor{keywordflow}{if}( dsbSecondary ) \{
283             \textcolor{keywordflow}{if}( \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae263135c638f224f26d2f2bfbd069840}{soundRecorder}} ) \{
284                 \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae263135c638f224f26d2f2bfbd069840}{soundRecorder}}->\mbox{\hyperlink{class_wav_writer_a2033f614c70ac3e59d07fb43ea26577a}{AddSound}}( (\mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} *)
      \mbox{\hyperlink{gb_sound_8cpp_aaaeebaacfff2cb98c4e68a6f89c1c8fc}{soundFinalWave}}, \mbox{\hyperlink{gb_sound_8cpp_aae9aa4cd368679872bfcb1d851f33019}{soundBufferLen}} );
285             \} \textcolor{keywordflow}{else} \{
286                 \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae263135c638f224f26d2f2bfbd069840}{soundRecorder}} = \textcolor{keyword}{new} \mbox{\hyperlink{class_wav_writer}{WavWriter}};
287                 dsbSecondary->GetFormat( &format, \textcolor{keyword}{sizeof}(format), \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} );
288                 \textcolor{keywordflow}{if}( \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae263135c638f224f26d2f2bfbd069840}{soundRecorder}}->\mbox{\hyperlink{class_wav_writer_a18a057d0c1901caa6b08f528bd6908a7}{Open}}( \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.
      \mbox{\hyperlink{class_v_b_a_a11f02b69eef7e9b876a2f93d6c2f015e}{soundRecordName}} ) ) \{
289                     \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_ae263135c638f224f26d2f2bfbd069840}{soundRecorder}}->\mbox{\hyperlink{class_wav_writer_a04fe7187eebeff2831af0bc85470744d}{SetFormat}}( &format );
290                 \}
291             \}
292         \}
293     \}
294     
295 
296     \textcolor{keywordflow}{if}( \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a96743b6c6ee2d9b45c52b981136e3738}{aviRecording}} ) \{
297         \textcolor{keywordflow}{if}( \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a761be1e36182d12710a199a50c0df020}{aviRecorder}} ) \{
298             \textcolor{keywordflow}{if}( dsbSecondary ) \{
299                 \textcolor{keywordflow}{if}( !\mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a761be1e36182d12710a199a50c0df020}{aviRecorder}}->\mbox{\hyperlink{class_a_v_i_write_a7e14c1640c3c888c2b0a0b042c0d5b8f}{IsSoundAdded}}() ) \{
300                     dsbSecondary->GetFormat( &format, \textcolor{keyword}{sizeof}(format), \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}} );
301                     \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a761be1e36182d12710a199a50c0df020}{aviRecorder}}->\mbox{\hyperlink{class_a_v_i_write_a8d864e6e2cea4147ffa6f24d69fbe339}{SetSoundFormat}}( &format );
302                 \}
303             \}
304             \mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_a761be1e36182d12710a199a50c0df020}{aviRecorder}}->\mbox{\hyperlink{class_a_v_i_write_a63b7d54c048e517bbfad0ae2004d9861}{AddSound}}( (\textcolor{keyword}{const} \textcolor{keywordtype}{char} *)
      \mbox{\hyperlink{gb_sound_8cpp_aaaeebaacfff2cb98c4e68a6f89c1c8fc}{soundFinalWave}}, \mbox{\hyperlink{gb_sound_8cpp_aae9aa4cd368679872bfcb1d851f33019}{soundBufferLen}} );
305         \}
306     \}
307     
308     
309     \textcolor{keywordflow}{if}( !\mbox{\hyperlink{_g_b_8cpp_a20b0a3180ffba5989d1414a438ea11dc}{speedup}} && \mbox{\hyperlink{_globals_8cpp_ac7839c270877c700179f026cb3217a6b}{synchronize}} && !\mbox{\hyperlink{_v_b_a_8cpp_a8095a9d06b37a7efe3723f3218ad8fb3}{theApp}}.\mbox{\hyperlink{class_v_b_a_af21b98509a2589b38e4787f065b40a2b}{throttle}} ) \{
310         hr = dsbSecondary->GetStatus(&status);
311         \textcolor{keywordflow}{if}( status & DSBSTATUS\_PLAYING ) \{
312             \textcolor{keywordflow}{if}( !\mbox{\hyperlink{gb_sound_8cpp_a10f738bb99a0e191b93b16418d4d7ff9}{soundPaused}} ) \{      
313                 \textcolor{keywordflow}{while}( \textcolor{keyword}{true} ) \{
314                     dsbSecondary->GetCurrentPosition(&play, \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});
315                     \textcolor{keywordflow}{if}( ( play < \mbox{\hyperlink{gb_sound_8cpp_adc4aef1739da801b4dd16c7d92eccf45}{soundNextPosition}} ) || ( play > (
      \mbox{\hyperlink{gb_sound_8cpp_adc4aef1739da801b4dd16c7d92eccf45}{soundNextPosition}} + \mbox{\hyperlink{gb_sound_8cpp_aae9aa4cd368679872bfcb1d851f33019}{soundBufferLen}}) ) ) \{
316                         \textcolor{keywordflow}{break};
317                     \}
318                     \textcolor{keywordflow}{if}( dsbEvent ) \{
319                         WaitForSingleObject(dsbEvent, 50);
320                     \}
321                 \}
322             \}
323         \} \textcolor{keywordflow}{else} \{
324             \mbox{\hyperlink{gb_sound_8cpp_a10f738bb99a0e191b93b16418d4d7ff9}{soundPaused}} = 1;
325         \}
326     \}
327     
328 
329     \textcolor{comment}{// Obtain memory address of write block.}
330     \textcolor{comment}{// This will be in two parts if the block wraps around.}
331     \textcolor{keywordflow}{if}( DSERR\_BUFFERLOST == ( hr = dsbSecondary->Lock(
332         \mbox{\hyperlink{gb_sound_8cpp_adc4aef1739da801b4dd16c7d92eccf45}{soundNextPosition}},
333         \mbox{\hyperlink{gb_sound_8cpp_aae9aa4cd368679872bfcb1d851f33019}{soundBufferLen}},
334         &lpvPtr1,
335         &dwBytes1,
336         &lpvPtr2,
337         &dwBytes2,
338         0 ) ) ) \{
339             \textcolor{comment}{// If DSERR\_BUFFERLOST is returned, restore and retry lock.}
340             dsbSecondary->Restore();
341             hr = dsbSecondary->Lock(
342                 \mbox{\hyperlink{gb_sound_8cpp_adc4aef1739da801b4dd16c7d92eccf45}{soundNextPosition}},
343                 \mbox{\hyperlink{gb_sound_8cpp_aae9aa4cd368679872bfcb1d851f33019}{soundBufferLen}},
344                 &lpvPtr1,
345                 &dwBytes1,
346                 &lpvPtr2,
347                 &dwBytes2,
348                 0 );
349     \}
350     
351     \mbox{\hyperlink{gb_sound_8cpp_adc4aef1739da801b4dd16c7d92eccf45}{soundNextPosition}} += \mbox{\hyperlink{gb_sound_8cpp_aae9aa4cd368679872bfcb1d851f33019}{soundBufferLen}};
352     \mbox{\hyperlink{gb_sound_8cpp_adc4aef1739da801b4dd16c7d92eccf45}{soundNextPosition}} = \mbox{\hyperlink{gb_sound_8cpp_adc4aef1739da801b4dd16c7d92eccf45}{soundNextPosition}} % 
      \mbox{\hyperlink{gb_sound_8cpp_ad35876ee81c2c65072ae9de971b907b8}{soundBufferTotalLen}};
353 
354     \textcolor{keywordflow}{if}( SUCCEEDED( hr ) ) \{
355         \textcolor{comment}{// Write to pointers.}
356         CopyMemory( lpvPtr1, \mbox{\hyperlink{gb_sound_8cpp_aaaeebaacfff2cb98c4e68a6f89c1c8fc}{soundFinalWave}}, dwBytes1 );
357         \textcolor{keywordflow}{if} ( lpvPtr2 ) \{
358             CopyMemory( lpvPtr2, \mbox{\hyperlink{gb_sound_8cpp_aaaeebaacfff2cb98c4e68a6f89c1c8fc}{soundFinalWave}} + dwBytes1, dwBytes2 );
359         \}
360         
361         \textcolor{comment}{// Release the data back to DirectSound.}
362         hr = dsbSecondary->Unlock( lpvPtr1, dwBytes1, lpvPtr2, dwBytes2 );
363     \} \textcolor{keywordflow}{else} \{
364         \mbox{\hyperlink{system_8cpp_a747a9cb8e015a3d45cca636b5bd0fc69}{systemMessage}}( 0, \_T(\textcolor{stringliteral}{"dsbSecondary->Lock() failed: %08x"}), hr );
365         \textcolor{keywordflow}{return};
366     \}
367 \}
\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_direct_sound_a2e2a78f3a6719920fb2a9dfc48e4b1db_cgraph}
\end{center}
\end{figure}


이 클래스에 대한 문서화 페이지는 다음의 파일로부터 생성되었습니다.\+:\begin{DoxyCompactItemize}
\item 
C\+:/\+Users/sjh13/sources/\+Visual\+Boy\+Advance/src/win32/\mbox{\hyperlink{_direct_sound_8cpp}{Direct\+Sound.\+cpp}}\end{DoxyCompactItemize}
