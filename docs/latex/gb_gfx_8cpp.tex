\hypertarget{gb_gfx_8cpp}{}\section{C\+:/\+Users/sjh13/sources/\+Visual\+Boy\+Advance/src/gb/gb\+Gfx.cpp 파일 참조}
\label{gb_gfx_8cpp}\index{C\+:/\+Users/sjh13/sources/\+Visual\+Boy\+Advance/src/gb/gb\+Gfx.\+cpp@{C\+:/\+Users/sjh13/sources/\+Visual\+Boy\+Advance/src/gb/gb\+Gfx.\+cpp}}
{\ttfamily \#include $<$memory.\+h$>$}\newline
{\ttfamily \#include \char`\"{}../\+G\+B\+A.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gb\+Globals.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}gb\+S\+G\+B.\+h\char`\"{}}\newline
gb\+Gfx.\+cpp에 대한 include 의존 그래프
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{gb_gfx_8cpp__incl}
\end{center}
\end{figure}
\subsection*{함수}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{gb_gfx_8cpp_a58ad7c6e9c36c06b4b5a778b6a0874e6}{gb\+Render\+Line}} ()
\item 
void \mbox{\hyperlink{gb_gfx_8cpp_a40dc9f304a6ede559e1eca2fc363bd8a}{gb\+Draw\+Sprite\+Tile}} (\mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}} tile, \mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}} x, \mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}} y, \mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}} \mbox{\hyperlink{expr_8cpp_aded116371789db1fd63c90ef00c95a3d}{t}}, \mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}} flags, \mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}} \mbox{\hyperlink{expr-lex_8cpp_ab7d671599a7b25ca99a487fa341bc33a}{size}}, \mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}} sprite\+Number)
\item 
void \mbox{\hyperlink{gb_gfx_8cpp_a989a0a4901bb2263dcbdb7f4dd69e003}{gb\+Draw\+Sprites}} (bool draw)
\end{DoxyCompactItemize}
\subsection*{변수}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} \mbox{\hyperlink{gb_gfx_8cpp_a97f094c733e10c52d264471592f505de}{gb\+Invert\+Tab}} \mbox{[}256\mbox{]}
\item 
\mbox{\hyperlink{_system_8h_a9e6c91d77e24643b888dbd1a1a590054}{u16}} \mbox{\hyperlink{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}{gb\+Line\+Mix}} \mbox{[}160\mbox{]}
\item 
\mbox{\hyperlink{_system_8h_a9e6c91d77e24643b888dbd1a1a590054}{u16}} \mbox{\hyperlink{gb_gfx_8cpp_a2d5713dc9b90a76348ddf8fc74faa49d}{gb\+Window\+Color}} \mbox{[}160\mbox{]}
\item 
\mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}} \mbox{\hyperlink{gb_gfx_8cpp_a29995e8cccff0ba14835253b6a3f193d}{in\+Use\+Register\+\_\+\+WY}}
\end{DoxyCompactItemize}


\subsection{함수 문서화}
\mbox{\Hypertarget{gb_gfx_8cpp_a989a0a4901bb2263dcbdb7f4dd69e003}\label{gb_gfx_8cpp_a989a0a4901bb2263dcbdb7f4dd69e003}} 
\index{gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}!gb\+Draw\+Sprites@{gb\+Draw\+Sprites}}
\index{gb\+Draw\+Sprites@{gb\+Draw\+Sprites}!gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}}
\subsubsection{\texorpdfstring{gb\+Draw\+Sprites()}{gbDrawSprites()}}
{\footnotesize\ttfamily void gb\+Draw\+Sprites (\begin{DoxyParamCaption}\item[{bool}]{draw }\end{DoxyParamCaption})}



gb\+Gfx.\+cpp 파일의 550 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
551 \{
552   \textcolor{keywordtype}{int} x = 0;
553   \textcolor{keywordtype}{int} y = 0;
554   \textcolor{keywordtype}{int} \mbox{\hyperlink{expr_8cpp_a16ff2d8e15ade4948398b0aeb80124a8}{count}} = 0;
555   
556   \textcolor{keywordtype}{int} \mbox{\hyperlink{expr-lex_8cpp_ab7d671599a7b25ca99a487fa341bc33a}{size}} = (\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 4);
557 
558   \textcolor{keywordflow}{if} (!draw)
559     memset (\mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}, 0, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}));
560 
561   \textcolor{keywordflow}{if}(!(\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 0x80))
562     \textcolor{keywordflow}{return};
563   
564   \textcolor{keywordflow}{if}((\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 2) && (\mbox{\hyperlink{_globals_8cpp_aab45842fd405c5c9c24494c026a4441f}{layerSettings}} & 0x1000)) \{
565     \textcolor{keywordtype}{int} yc = \mbox{\hyperlink{_g_b_8cpp_aad4589c2dc32beaef2c70b2f9af5e54b}{register\_LY}};
566       
567     \textcolor{keywordtype}{int} address = 0xfe00;
568     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} = 0; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} < 40; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++) \{
569       y = \mbox{\hyperlink{gb_globals_8cpp_a43f07d3a5fcb2301e2662188e888c5a1}{gbMemory}}[address++];
570       x = \mbox{\hyperlink{gb_globals_8cpp_a43f07d3a5fcb2301e2662188e888c5a1}{gbMemory}}[address++];
571       \textcolor{keywordtype}{int} tile = \mbox{\hyperlink{gb_globals_8cpp_a43f07d3a5fcb2301e2662188e888c5a1}{gbMemory}}[address++];
572       \textcolor{keywordflow}{if}(\mbox{\hyperlink{expr-lex_8cpp_ab7d671599a7b25ca99a487fa341bc33a}{size}})
573         tile &= 254;
574       \textcolor{keywordtype}{int} flags = \mbox{\hyperlink{gb_globals_8cpp_a43f07d3a5fcb2301e2662188e888c5a1}{gbMemory}}[address++];
575 
576       \textcolor{keywordflow}{if}(x > 0 && y > 0 && x < 168 && y < 160) \{
577         \textcolor{comment}{// check if sprite intersects current line}
578         \textcolor{keywordtype}{int} \mbox{\hyperlink{expr_8cpp_aded116371789db1fd63c90ef00c95a3d}{t}} = yc -y + 16;
579         \textcolor{keywordflow}{if}((\mbox{\hyperlink{expr-lex_8cpp_ab7d671599a7b25ca99a487fa341bc33a}{size}} && \mbox{\hyperlink{expr_8cpp_aded116371789db1fd63c90ef00c95a3d}{t}} >=0 && \mbox{\hyperlink{expr_8cpp_aded116371789db1fd63c90ef00c95a3d}{t}} < 16) || (!\mbox{\hyperlink{expr-lex_8cpp_ab7d671599a7b25ca99a487fa341bc33a}{size}} && \mbox{\hyperlink{expr_8cpp_aded116371789db1fd63c90ef00c95a3d}{t}} >= 0 && \mbox{\hyperlink{expr_8cpp_aded116371789db1fd63c90ef00c95a3d}{t}} < 8)) \{
580           \textcolor{keywordflow}{if} (draw)
581             \mbox{\hyperlink{gb_gfx_8cpp_a40dc9f304a6ede559e1eca2fc363bd8a}{gbDrawSpriteTile}}(tile,x-8,yc,\mbox{\hyperlink{expr_8cpp_aded116371789db1fd63c90ef00c95a3d}{t}},flags,\mbox{\hyperlink{expr-lex_8cpp_ab7d671599a7b25ca99a487fa341bc33a}{size}},\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}});
582           \textcolor{keywordflow}{else}
583           \{
584             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = x-8; j<300; j++)
585               \textcolor{keywordflow}{if} (j>=0)
586                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}})
587                   \mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}[j] += 5;
588                 \textcolor{keywordflow}{else}
589                   \mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}[j] += 2+(\mbox{\hyperlink{expr_8cpp_a16ff2d8e15ade4948398b0aeb80124a8}{count}}&1);
590 
591           \}
592           \mbox{\hyperlink{expr_8cpp_a16ff2d8e15ade4948398b0aeb80124a8}{count}}++;
593         \}
594       \}
595       \textcolor{comment}{// sprite limit reached!}
596       \textcolor{keywordflow}{if}(\mbox{\hyperlink{expr_8cpp_a16ff2d8e15ade4948398b0aeb80124a8}{count}} >= 10)
597         \textcolor{keywordflow}{break};
598     \}   
599   \}
600   \textcolor{keywordflow}{return};
601 \}
\end{DoxyCode}
이 함수 내부에서 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=285pt]{gb_gfx_8cpp_a989a0a4901bb2263dcbdb7f4dd69e003_cgraph}
\end{center}
\end{figure}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{gb_gfx_8cpp_a989a0a4901bb2263dcbdb7f4dd69e003_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{gb_gfx_8cpp_a40dc9f304a6ede559e1eca2fc363bd8a}\label{gb_gfx_8cpp_a40dc9f304a6ede559e1eca2fc363bd8a}} 
\index{gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}!gb\+Draw\+Sprite\+Tile@{gb\+Draw\+Sprite\+Tile}}
\index{gb\+Draw\+Sprite\+Tile@{gb\+Draw\+Sprite\+Tile}!gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}}
\subsubsection{\texorpdfstring{gb\+Draw\+Sprite\+Tile()}{gbDrawSpriteTile()}}
{\footnotesize\ttfamily void gb\+Draw\+Sprite\+Tile (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}}}]{tile,  }\item[{\mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}}}]{x,  }\item[{\mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}}}]{y,  }\item[{\mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}}}]{t,  }\item[{\mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}}}]{flags,  }\item[{\mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}}}]{size,  }\item[{\mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}}}]{sprite\+Number }\end{DoxyParamCaption})}



gb\+Gfx.\+cpp 파일의 422 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
424 \{
425   \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} * bank0;
426   \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} * bank1;
427   \textcolor{keywordflow}{if}(\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) \{
428     \textcolor{keywordflow}{if}(\mbox{\hyperlink{_g_b_8cpp_a649138268bf54f59608cbe4543a7d6de}{register\_VBK}} & 1) \{
429       bank0 = &\mbox{\hyperlink{gb_globals_8cpp_acc4cae98f0f9473610870333741081e9}{gbVram}}[0x0000];
430       bank1 = &\mbox{\hyperlink{gb_globals_8cpp_acc4cae98f0f9473610870333741081e9}{gbVram}}[0x2000];
431     \} \textcolor{keywordflow}{else} \{
432       bank0 = &\mbox{\hyperlink{gb_globals_8cpp_acc4cae98f0f9473610870333741081e9}{gbVram}}[0x0000];
433       bank1 = &\mbox{\hyperlink{gb_globals_8cpp_acc4cae98f0f9473610870333741081e9}{gbVram}}[0x2000];
434     \}
435   \} \textcolor{keywordflow}{else} \{
436     bank0 = &\mbox{\hyperlink{gb_globals_8cpp_a43f07d3a5fcb2301e2662188e888c5a1}{gbMemory}}[0x8000];
437     bank1 = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
438   \}
439   
440   \textcolor{keywordtype}{int} init = 0x0000;
441 
442   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} = 0; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<4; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)
443   \{
444     \mbox{\hyperlink{gb_globals_8cpp_ac4d1dd952085f2cbecc7663050994012}{gbObp0}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}] = (\mbox{\hyperlink{_g_b_8cpp_ae9bdf1830d9cc0311f49bc3ac3619e2b}{gbObp0Line}}[x+11+\mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}[x]*(
      \mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 2 : 4)]>>(\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<<1)) & 3;
445     \mbox{\hyperlink{gb_globals_8cpp_a8200c8214bf94708e583eee237042d00}{gbObp1}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}] = (\mbox{\hyperlink{_g_b_8cpp_a5c2bbe8c392c9c591ba889e3ea8ff5fc}{gbObp1Line}}[x+11+\mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}[x]*(
      \mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 2 : 4)]>>(\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<<1)) & 3;
446   \}
447   \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} *pal = \mbox{\hyperlink{gb_globals_8cpp_ac4d1dd952085f2cbecc7663050994012}{gbObp0}};
448 
449   \textcolor{keywordtype}{int} flipx = (flags & 0x20);
450   \textcolor{keywordtype}{int} flipy = (flags & 0x40);
451   
452   \textcolor{keywordflow}{if}((flags & 0x10))
453     pal = \mbox{\hyperlink{gb_globals_8cpp_a8200c8214bf94708e583eee237042d00}{gbObp1}};
454 
455   \textcolor{keywordflow}{if}(flipy) \{
456     \mbox{\hyperlink{expr_8cpp_aded116371789db1fd63c90ef00c95a3d}{t}} = (\mbox{\hyperlink{expr-lex_8cpp_ab7d671599a7b25ca99a487fa341bc33a}{size}} ? 15 : 7) - \mbox{\hyperlink{expr_8cpp_aded116371789db1fd63c90ef00c95a3d}{t}};
457   \}
458 
459   \textcolor{keywordtype}{int} prio =  flags & 0x80;
460   
461   \textcolor{keywordtype}{int} address = init + tile * 16 + 2*\mbox{\hyperlink{expr_8cpp_aded116371789db1fd63c90ef00c95a3d}{t}};
462   \textcolor{keywordtype}{int} a = 0;
463   \textcolor{keywordtype}{int} \mbox{\hyperlink{expr-lex_8cpp_a91b64995742fd30063314f12340b4b5a}{b}} = 0;
464 
465   \textcolor{keywordflow}{if}(\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}} && (flags & 0x08)) \{
466     a = bank1[address++];
467     \mbox{\hyperlink{expr-lex_8cpp_a91b64995742fd30063314f12340b4b5a}{b}} = bank1[address++];
468   \} \textcolor{keywordflow}{else} \{
469     a = bank0[address++];
470     \mbox{\hyperlink{expr-lex_8cpp_a91b64995742fd30063314f12340b4b5a}{b}} = bank0[address++];
471   \}
472   
473   \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} xx = 0; xx < 8; xx++) \{
474     \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} mask = 1 << (7-xx);
475     \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} c = 0;
476     \textcolor{keywordflow}{if}( (a & mask))
477       c++;
478     \textcolor{keywordflow}{if}( (\mbox{\hyperlink{expr-lex_8cpp_a91b64995742fd30063314f12340b4b5a}{b}} & mask))
479       c+=2;
480     
481     \textcolor{keywordflow}{if}(c==0) \textcolor{keywordflow}{continue};
482 
483     \textcolor{keywordtype}{int} xxx = xx+x;
484     \textcolor{keywordflow}{if}(flipx)
485       xxx = (7-xx+x);
486 
487     \textcolor{keywordflow}{if}(xxx < 0 || xxx > 159)
488       \textcolor{keywordflow}{continue};
489 
490     \mbox{\hyperlink{_system_8h_a9e6c91d77e24643b888dbd1a1a590054}{u16}} color = \mbox{\hyperlink{gb_globals_8cpp_a28491355be3715000cb2fea27dc567d0}{gbLineBuffer}}[xxx];
491 
492     \textcolor{comment}{// Fixes OAM-BG priority}
493     \textcolor{keywordflow}{if}(prio && (\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 1)) \{
494       \textcolor{keywordflow}{if}(color < 0x200 && ((color & 0xFF) != 0))
495         \textcolor{keywordflow}{continue};
496     \}
497     \textcolor{comment}{// Fixes OAM-BG priority for Moorhuhn 2}
498     \textcolor{keywordflow}{if}(color >= 0x300 && color != 0x300 && (\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 1))
499       \textcolor{keywordflow}{continue};
500     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(color >= 0x200 && color < 0x300) \{
501       \textcolor{keywordtype}{int} sprite = color & 0xff;
502 
503       \textcolor{keywordtype}{int} spriteX = \mbox{\hyperlink{gb_globals_8cpp_a43f07d3a5fcb2301e2662188e888c5a1}{gbMemory}}[0xfe00 + 4 * sprite + 1] - 8;
504 
505       \textcolor{keywordflow}{if}(spriteX == x) \{
506         \textcolor{keywordflow}{if}(sprite < spriteNumber)
507           \textcolor{keywordflow}{continue};
508       \} \textcolor{keywordflow}{else} \{
509         \textcolor{keywordflow}{if}(\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) \{
510           \textcolor{keywordflow}{if}(sprite < spriteNumber)
511             \textcolor{keywordflow}{continue};
512         \} \textcolor{keywordflow}{else} \{
513           \textcolor{comment}{// Fixes GB sprites priorities (was '< x + 8' before)}
514           \textcolor{comment}{// ('A boy and his blob...' sprites' emulation is now correct)}
515           \textcolor{keywordflow}{if}(spriteX < x)
516             \textcolor{keywordflow}{continue};
517         \}
518       \}
519     \} 
520     
521 
522     \mbox{\hyperlink{gb_globals_8cpp_a28491355be3715000cb2fea27dc567d0}{gbLineBuffer}}[xxx] = 0x200 + spriteNumber;
523 
524     \textcolor{comment}{// make sure that sprites will work even in CGB mode}
525     \textcolor{keywordflow}{if}(\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) \{
526       c = c + (flags & 0x07)*4 + 32;
527     \} \textcolor{keywordflow}{else} \{
528       c = pal[c];
529 
530       \textcolor{keywordflow}{if}(\mbox{\hyperlink{gb_globals_8h_aade6a7bab8d45119651cd9e8103d2cf8}{gbSgbMode}} && !\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) \{
531         \textcolor{keywordtype}{int} dx = xxx >> 3;
532         \textcolor{keywordtype}{int} dy = y >> 3;
533         
534         \textcolor{keywordtype}{int} palette = \mbox{\hyperlink{gb_s_g_b_8cpp_a36468d1af7c1def81c5b47ba92bb8c94}{gbSgbATF}}[dy * 20 + dx];
535         
536         \textcolor{keywordflow}{if}(c == 0)
537           palette = 0;
538         
539         c = c + 4*palette;              
540       \} \textcolor{keywordflow}{else} \{
541         c += 4;
542       \}
543     \}
544 
545     \mbox{\hyperlink{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}{gbLineMix}}[xxx] = \mbox{\hyperlink{gb_globals_8cpp_abb08650d8f653865820da10dc8e59a8b}{gbColorOption}} ? \mbox{\hyperlink{gb_globals_8cpp_a3c099dd31f1abe974c65df9e99d74793}{gbColorFilter}}[
      \mbox{\hyperlink{gb_globals_8cpp_a7c46bfb4d71e64d27d5aec543ba85b9a}{gbPalette}}[c] & 0x7FFF] :
546       \mbox{\hyperlink{gb_globals_8cpp_a7c46bfb4d71e64d27d5aec543ba85b9a}{gbPalette}}[c] & 0x7FFF;
547   \}
548 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{gb_gfx_8cpp_a40dc9f304a6ede559e1eca2fc363bd8a_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{gb_gfx_8cpp_a58ad7c6e9c36c06b4b5a778b6a0874e6}\label{gb_gfx_8cpp_a58ad7c6e9c36c06b4b5a778b6a0874e6}} 
\index{gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}!gb\+Render\+Line@{gb\+Render\+Line}}
\index{gb\+Render\+Line@{gb\+Render\+Line}!gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}}
\subsubsection{\texorpdfstring{gb\+Render\+Line()}{gbRenderLine()}}
{\footnotesize\ttfamily void gb\+Render\+Line (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



gb\+Gfx.\+cpp 파일의 64 번째 라인에서 정의되었습니다.


\begin{DoxyCode}
65 \{
66   memset(\mbox{\hyperlink{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}{gbLineMix}}, 0, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}{gbLineMix}}));
67   \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} * bank0;
68   \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} * bank1;
69   \textcolor{keywordflow}{if}(\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) \{
70     bank0 = &\mbox{\hyperlink{gb_globals_8cpp_acc4cae98f0f9473610870333741081e9}{gbVram}}[0x0000];
71     bank1 = &\mbox{\hyperlink{gb_globals_8cpp_acc4cae98f0f9473610870333741081e9}{gbVram}}[0x2000];
72   \} \textcolor{keywordflow}{else} \{
73     bank0 = &\mbox{\hyperlink{gb_globals_8cpp_a43f07d3a5fcb2301e2662188e888c5a1}{gbMemory}}[0x8000];
74     bank1 = \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}};
75   \}
76   
77   \textcolor{keywordtype}{int} tile\_map = 0x1800;
78   \textcolor{keywordflow}{if}((\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 8) != 0)
79     tile\_map = 0x1c00;
80 
81   \textcolor{keywordtype}{int} tile\_pattern = 0x0800;
82 
83   \textcolor{keywordflow}{if}((\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 16) != 0)
84     tile\_pattern = 0x0000;
85     
86   \textcolor{keywordtype}{int} x = 0;
87   \textcolor{keywordtype}{int} y = \mbox{\hyperlink{_g_b_8cpp_aad4589c2dc32beaef2c70b2f9af5e54b}{register\_LY}};
88 
89   \textcolor{keywordflow}{if}(y >= 144)
90     \textcolor{keywordflow}{return};
91 
92   \textcolor{keywordtype}{int} SpritesTicks = \mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}[x]*(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 2 : 4);
93   \textcolor{keywordtype}{int} sx = \mbox{\hyperlink{_g_b_8cpp_a36343b46b0d9331cfee81944cda1087c}{gbSCXLine}}[(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 0 : 4)+SpritesTicks];
94   \textcolor{keywordtype}{int} sy = \mbox{\hyperlink{_g_b_8cpp_a26111ddea8553b4079e52f0ecbee0b95}{gbSCYLine}}[(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 11 : 5)+SpritesTicks];
95 
96   sy+=y;
97 
98   sy &= 255;
99     
100   \textcolor{keywordtype}{int} tx = sx >> 3;
101   \textcolor{keywordtype}{int} ty = sy >> 3;
102 
103   \textcolor{keywordtype}{int} bx = 1 << (7 - (sx & 7));
104   \textcolor{keywordtype}{int} by = sy & 7;
105 
106   \textcolor{keywordtype}{int} tile\_map\_line\_y = tile\_map + ty * 32;
107   
108   \textcolor{keywordtype}{int} tile\_map\_address = tile\_map\_line\_y + tx;
109 
110   \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} attrs = 0;
111   \textcolor{keywordflow}{if}(bank1 != \mbox{\hyperlink{getopt1_8c_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})
112     attrs = bank1[tile\_map\_address];
113   
114   \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} tile = bank0[tile\_map\_address];
115   
116   tile\_map\_address++;
117   
118   \textcolor{keywordflow}{if}(!(\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 0x10))
119         tile ^= 0x80;
120 
121   \textcolor{keywordtype}{int} tile\_pattern\_address = tile\_pattern + tile * 16 + by*2;
122 
123   \textcolor{keywordflow}{if}(\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 0x80) \{
124     \textcolor{keywordflow}{if}((\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 0x01 || \mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) && (
      \mbox{\hyperlink{_globals_8cpp_aab45842fd405c5c9c24494c026a4441f}{layerSettings}} & 0x0100)) \{
125       \textcolor{keywordflow}{while}(x < 160) \{
126 
127 
128 
129         \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} tile\_a = 0;
130         \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} tile\_b = 0;
131         
132         \textcolor{keywordflow}{if}(attrs & 0x40) \{
133           tile\_pattern\_address = tile\_pattern + tile * 16 + (7-by)*2;
134         \}
135         
136         \textcolor{keywordflow}{if}(attrs & 0x08) \{
137           tile\_a = bank1[tile\_pattern\_address++];
138           tile\_b = bank1[tile\_pattern\_address];
139         \} \textcolor{keywordflow}{else} \{
140           tile\_a = bank0[tile\_pattern\_address++];
141           tile\_b = bank0[tile\_pattern\_address];
142         \}
143         
144         \textcolor{keywordflow}{if}(attrs & 0x20) \{
145           tile\_a = \mbox{\hyperlink{gb_gfx_8cpp_a97f094c733e10c52d264471592f505de}{gbInvertTab}}[tile\_a];
146           tile\_b = \mbox{\hyperlink{gb_gfx_8cpp_a97f094c733e10c52d264471592f505de}{gbInvertTab}}[tile\_b];
147         \}
148         
149         \textcolor{keywordflow}{while}(bx > 0) \{
150           \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} c = (tile\_a & bx) ? 1 : 0;
151           c += ((tile\_b & bx) ? 2 : 0);
152           
153           \mbox{\hyperlink{gb_globals_8cpp_a28491355be3715000cb2fea27dc567d0}{gbLineBuffer}}[x] = c; \textcolor{comment}{// mark the gbLineBuffer color}
154           
155           \textcolor{keywordflow}{if}(attrs & 0x80)
156             \mbox{\hyperlink{gb_globals_8cpp_a28491355be3715000cb2fea27dc567d0}{gbLineBuffer}}[x] |= 0x300;
157           
158           \textcolor{keywordflow}{if}(\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) \{
159             c = c + (attrs & 7)*4;
160           \} \textcolor{keywordflow}{else} \{
161             c = (\mbox{\hyperlink{_g_b_8cpp_a754f72d502cf0c77a0b99d387a9d60a4}{gbBgpLine}}[x+(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 5 : 11)+SpritesTicks]>>(c<<1)) &3;         
162             \textcolor{keywordflow}{if}(\mbox{\hyperlink{gb_globals_8h_aade6a7bab8d45119651cd9e8103d2cf8}{gbSgbMode}} && !\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) \{
163               \textcolor{keywordtype}{int} dx = x >> 3;
164               \textcolor{keywordtype}{int} dy = y >> 3;
165               
166               \textcolor{keywordtype}{int} palette = \mbox{\hyperlink{gb_s_g_b_8cpp_a36468d1af7c1def81c5b47ba92bb8c94}{gbSgbATF}}[dy * 20 + dx];
167               
168               \textcolor{keywordflow}{if}(c == 0)
169                 palette = 0;
170               
171               c = c + 4*palette;
172             \}
173           \}
174           \mbox{\hyperlink{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}{gbLineMix}}[x] = \mbox{\hyperlink{gb_globals_8cpp_abb08650d8f653865820da10dc8e59a8b}{gbColorOption}} ? \mbox{\hyperlink{gb_globals_8cpp_a3c099dd31f1abe974c65df9e99d74793}{gbColorFilter}}[
      \mbox{\hyperlink{gb_globals_8cpp_a7c46bfb4d71e64d27d5aec543ba85b9a}{gbPalette}}[c] & 0x7FFF] :
175             \mbox{\hyperlink{gb_globals_8cpp_a7c46bfb4d71e64d27d5aec543ba85b9a}{gbPalette}}[c] & 0x7FFF;
176           x++;
177           \textcolor{keywordflow}{if}(x >= 160)
178             \textcolor{keywordflow}{break};
179           bx >>= 1;
180         \}
181           
182         bx = 128;
183        
184         SpritesTicks = \mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}[x]*(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 2 : 4);
185 
186         sx = \mbox{\hyperlink{_g_b_8cpp_a36343b46b0d9331cfee81944cda1087c}{gbSCXLine}}[x+(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 0 : 4)+SpritesTicks];
187 
188         sy = \mbox{\hyperlink{_g_b_8cpp_a26111ddea8553b4079e52f0ecbee0b95}{gbSCYLine}}[x+(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 11 : 5)+SpritesTicks];
189 
190 
191         tx = ((sx+x)>>3) & 0x1f;     
192 
193         sy+=y;
194 
195         sy &= 255;
196 
197         ty = sy >> 3;
198 
199         by = sy & 7;
200 
201         tile\_pattern\_address = tile\_pattern + tile * 16 + by * 2;
202 
203         tile\_map\_line\_y = tile\_map + ty * 32;
204 
205         tile\_map\_address = tile\_map\_line\_y + tx;
206 
207         \textcolor{keywordflow}{if}(bank1)
208           attrs = bank1[tile\_map\_line\_y + tx];
209         
210         tile = bank0[tile\_map\_line\_y + tx];
211 
212         \textcolor{keywordflow}{if}(!(\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 0x10))
213           tile ^= 0x80;
214 
215         tile\_pattern\_address = tile\_pattern + tile * 16 + by * 2;
216       \}
217     \} \textcolor{keywordflow}{else} \{
218       \textcolor{comment}{// Use gbBgp[0] instead of 0 (?)}
219       \textcolor{comment}{// (this fixes white flashes on Last Bible II)}
220       \textcolor{comment}{// Also added the gbColorOption (fixes Dracula Densetsu II color problems)}
221       \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} = 0; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} < 160; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)
222       \{
223         \mbox{\hyperlink{_system_8h_a9e6c91d77e24643b888dbd1a1a590054}{u16}} color = \mbox{\hyperlink{gb_globals_8cpp_abb08650d8f653865820da10dc8e59a8b}{gbColorOption}} ? \mbox{\hyperlink{gb_globals_8cpp_a3c099dd31f1abe974c65df9e99d74793}{gbColorFilter}}[0x7FFF] :
224                     0x7FFF;
225         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}})
226         color = \mbox{\hyperlink{gb_globals_8cpp_abb08650d8f653865820da10dc8e59a8b}{gbColorOption}} ? \mbox{\hyperlink{gb_globals_8cpp_a3c099dd31f1abe974c65df9e99d74793}{gbColorFilter}}[
      \mbox{\hyperlink{gb_globals_8cpp_a7c46bfb4d71e64d27d5aec543ba85b9a}{gbPalette}}[\mbox{\hyperlink{_g_b_8cpp_a754f72d502cf0c77a0b99d387a9d60a4}{gbBgpLine}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}+(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 5 : 11)+
      \mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]*(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 2 : 4)]&3] & 0x7FFF] :
227                 \mbox{\hyperlink{gb_globals_8cpp_a7c46bfb4d71e64d27d5aec543ba85b9a}{gbPalette}}[\mbox{\hyperlink{_g_b_8cpp_a754f72d502cf0c77a0b99d387a9d60a4}{gbBgpLine}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}+(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 5 : 11)+
      \mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}]*(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 2 : 4)]&3] & 0x7FFF;
228         \mbox{\hyperlink{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}{gbLineMix}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}] = color;
229         \mbox{\hyperlink{gb_globals_8cpp_a28491355be3715000cb2fea27dc567d0}{gbLineBuffer}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}] = 0;
230       \}
231     \}
232     
233     \textcolor{comment}{// do the window display}
234     \textcolor{comment}{// LCDC.0 also enables/disables the window in !gbCgbMode ?!?!}
235     \textcolor{comment}{// (tested on real hardware)}
236     \textcolor{comment}{// This fixes Last Bible II & Zankurou Musouken}
237     \textcolor{keywordflow}{if}((\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 0x01 || \mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) && (
      \mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 0x20) &&
238         (\mbox{\hyperlink{_globals_8cpp_aab45842fd405c5c9c24494c026a4441f}{layerSettings}} & 0x2000) && (\mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} != -2)) \{
239       \textcolor{keywordtype}{int} \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} = 0;
240       \textcolor{comment}{// Fix (accurate emulation) for most of the window display problems}
241       \textcolor{comment}{// (ie. Zen - Intergalactic Ninja, Urusei Yatsura...).}
242       \textcolor{keywordflow}{if} ((\mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} == -1) || (\mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}}>144))
243       \{
244         \mbox{\hyperlink{gb_gfx_8cpp_a29995e8cccff0ba14835253b6a3f193d}{inUseRegister\_WY}} = \mbox{\hyperlink{_g_b_8cpp_ae85aa77fbabadb9981575f14fc251b50}{oldRegister\_WY}};
245         \textcolor{keywordflow}{if} (\mbox{\hyperlink{_g_b_8cpp_aad4589c2dc32beaef2c70b2f9af5e54b}{register\_LY}}>\mbox{\hyperlink{_g_b_8cpp_ae85aa77fbabadb9981575f14fc251b50}{oldRegister\_WY}})
246           \mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} = 146;
247      \textcolor{comment}{// for (i = 0; i<160; i++)}
248      \textcolor{comment}{//   gbWindowColor[i] = gbLineMix[i];}
249       \}
250 
251       \textcolor{keywordtype}{int} wy = \mbox{\hyperlink{gb_gfx_8cpp_a29995e8cccff0ba14835253b6a3f193d}{inUseRegister\_WY}};
252       
253       \textcolor{keywordflow}{if}(y >= \mbox{\hyperlink{gb_gfx_8cpp_a29995e8cccff0ba14835253b6a3f193d}{inUseRegister\_WY}}) \{
254 
255         \textcolor{keywordflow}{if} (\mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} == -1)
256           \mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} = 0;
257 
258         \textcolor{keywordtype}{int} wx = \mbox{\hyperlink{_g_b_8cpp_a43896b4dc65b98644f0b065e4e56a636}{register\_WX}};
259         \textcolor{keywordtype}{int} swx = 0;
260         wx -= 7;
261         
262         \textcolor{keywordflow}{if}( wx <= 159 && \mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} <= 143) \{
263           
264           tile\_map = 0x1800;
265           
266           \textcolor{keywordflow}{if}((\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 0x40) != 0)
267             tile\_map = 0x1c00;
268          
269           
270           tx = 0;
271           ty = \mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} >> 3;
272           
273           bx = 128;
274           by = \mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} & 7;
275           
276           \textcolor{comment}{// Tries to emulate the 'window scrolling bug' when wx == 0 (ie. wx-7 == -7).}
277           \textcolor{comment}{// Nothing close to perfect, but good enought for now...}
278           \textcolor{keywordflow}{if} (wx == -7)
279           \{
280             swx = 7-((\mbox{\hyperlink{_g_b_8cpp_a36343b46b0d9331cfee81944cda1087c}{gbSCXLine}}[0]-1) & 7);
281             bx >>= ((\mbox{\hyperlink{_g_b_8cpp_a36343b46b0d9331cfee81944cda1087c}{gbSCXLine}}[0]+((swx != 1) ? 1 : 0)) & 7);
282             \textcolor{keywordflow}{if} (swx == 1)
283               swx = 2;
284               
285             \textcolor{comment}{//bx >>= ((gbSCXLine[0]+(((swx>1) && (swx != 7)) ? 1 : 0)) & 7);}
286 
287             \textcolor{keywordflow}{if} ((swx == 7))
288             \{
289               \textcolor{comment}{//wx = 0;}
290               \textcolor{keywordflow}{if} ((\mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}}>0) || (wy == 0))
291                 swx = 0;
292             \}
293           \}
294           \textcolor{keywordflow}{else}
295           \textcolor{keywordflow}{if}(wx < 0) \{
296             bx >>= (-wx);
297             wx = 0;
298           \}
299           
300           tile\_map\_line\_y = tile\_map + ty * 32;
301           
302           tile\_map\_address = tile\_map\_line\_y + tx;
303           
304           x = wx;
305           
306           tile = bank0[tile\_map\_address];
307           \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} attrs = 0;
308           \textcolor{keywordflow}{if}(bank1)
309             attrs = bank1[tile\_map\_address];
310           tile\_map\_address++;
311           
312           \textcolor{keywordflow}{if}((\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 16) == 0) \{    
313             \textcolor{keywordflow}{if}(tile < 128) tile += 128;
314             \textcolor{keywordflow}{else} tile -= 128;
315           \}
316           
317           tile\_pattern\_address = tile\_pattern + tile * 16 + by*2;
318 
319           \textcolor{keywordflow}{if} (wx)
320           \textcolor{keywordflow}{for} (\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} = 0; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}<swx; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)
321             \mbox{\hyperlink{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}{gbLineMix}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}] = \mbox{\hyperlink{gb_gfx_8cpp_a2d5713dc9b90a76348ddf8fc74faa49d}{gbWindowColor}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}];
322 
323           \textcolor{keywordflow}{while}(x < 160) \{
324             \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} tile\_a = 0;
325             \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} tile\_b = 0;
326             
327             \textcolor{keywordflow}{if}(attrs & 0x40) \{
328               tile\_pattern\_address = tile\_pattern + tile * 16 + (7-by)*2;
329             \}
330             
331             \textcolor{keywordflow}{if}(attrs & 0x08) \{
332               tile\_a = bank1[tile\_pattern\_address++];
333               tile\_b = bank1[tile\_pattern\_address];
334             \} \textcolor{keywordflow}{else} \{
335               tile\_a = bank0[tile\_pattern\_address++];
336               tile\_b = bank0[tile\_pattern\_address];
337             \}
338             
339             \textcolor{keywordflow}{if}(attrs & 0x20) \{
340               tile\_a = \mbox{\hyperlink{gb_gfx_8cpp_a97f094c733e10c52d264471592f505de}{gbInvertTab}}[tile\_a];
341               tile\_b = \mbox{\hyperlink{gb_gfx_8cpp_a97f094c733e10c52d264471592f505de}{gbInvertTab}}[tile\_b];
342             \}
343             
344             \textcolor{keywordflow}{while}(bx > 0) \{
345               \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} c = (tile\_a & bx) != 0 ? 1 : 0;
346               c += ((tile\_b & bx) != 0 ? 2 : 0);
347 
348               \textcolor{keywordflow}{if} (x>=0)
349               \{
350               \textcolor{keywordflow}{if}(attrs & 0x80)
351                 \mbox{\hyperlink{gb_globals_8cpp_a28491355be3715000cb2fea27dc567d0}{gbLineBuffer}}[x] = 0x300 + c;
352               \textcolor{keywordflow}{else}
353                 \mbox{\hyperlink{gb_globals_8cpp_a28491355be3715000cb2fea27dc567d0}{gbLineBuffer}}[x] = 0x100 + c;
354               
355               \textcolor{keywordflow}{if}(\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) \{
356                 c = c + (attrs & 7) * 4;
357               \} \textcolor{keywordflow}{else} \{
358                 c = (\mbox{\hyperlink{_g_b_8cpp_a754f72d502cf0c77a0b99d387a9d60a4}{gbBgpLine}}[x+(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 5 : 11)+
      \mbox{\hyperlink{_g_b_8cpp_a715f2cbfee64834b0811918eae6133f4}{gbSpritesTicks}}[x]*(\mbox{\hyperlink{_g_b_8cpp_a57af6302651162dfa4efd78a14a6dd29}{gbSpeed}} ? 2 : 4)]>>(c<<1)) &3;         
359                 \textcolor{keywordflow}{if}(\mbox{\hyperlink{gb_globals_8h_aade6a7bab8d45119651cd9e8103d2cf8}{gbSgbMode}} && !\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}}) \{
360                   \textcolor{keywordtype}{int} dx = x >> 3;
361                   \textcolor{keywordtype}{int} dy = y >> 3;
362                   
363                   \textcolor{keywordtype}{int} palette = \mbox{\hyperlink{gb_s_g_b_8cpp_a36468d1af7c1def81c5b47ba92bb8c94}{gbSgbATF}}[dy * 20 + dx];
364                   
365                   \textcolor{keywordflow}{if}(c == 0)
366                     palette = 0;
367                   
368                   c = c + 4*palette;            
369                 \}
370               \}
371               \mbox{\hyperlink{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}{gbLineMix}}[x] = \mbox{\hyperlink{gb_globals_8cpp_abb08650d8f653865820da10dc8e59a8b}{gbColorOption}} ? \mbox{\hyperlink{gb_globals_8cpp_a3c099dd31f1abe974c65df9e99d74793}{gbColorFilter}}[
      \mbox{\hyperlink{gb_globals_8cpp_a7c46bfb4d71e64d27d5aec543ba85b9a}{gbPalette}}[c] & 0x7FFF] :
372                 \mbox{\hyperlink{gb_globals_8cpp_a7c46bfb4d71e64d27d5aec543ba85b9a}{gbPalette}}[c] & 0x7FFF;
373               \}
374               x++;
375               \textcolor{keywordflow}{if}(x >= 160)
376                 \textcolor{keywordflow}{break};
377               bx >>= 1;
378             \}
379             tx++;
380             \textcolor{keywordflow}{if}(tx == 32)
381               tx = 0;
382             bx = 128;
383             tile = bank0[tile\_map\_line\_y + tx];
384             \textcolor{keywordflow}{if}(bank1)
385               attrs = bank1[tile\_map\_line\_y + tx];
386             
387             \textcolor{keywordflow}{if}((\mbox{\hyperlink{_g_b_8cpp_af18da9d87d0d4a930844db59eef99432}{register\_LCDC}} & 16) == 0) \{         
388               \textcolor{keywordflow}{if}(tile < 128) tile += 128;
389               \textcolor{keywordflow}{else} tile -= 128;
390             \}
391             tile\_pattern\_address = tile\_pattern + tile * 16 + by * 2;
392           \}
393 
394           \textcolor{comment}{//for (i = swx; i<160; i++)}
395           \textcolor{comment}{//  gbLineMix[i] = gbWindowColor[i];}
396           \mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}}++;
397         \}
398       \}
399     \}
400     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} == -2)
401     \{
402       \mbox{\hyperlink{gb_gfx_8cpp_a29995e8cccff0ba14835253b6a3f193d}{inUseRegister\_WY}} = \mbox{\hyperlink{_g_b_8cpp_ae85aa77fbabadb9981575f14fc251b50}{oldRegister\_WY}};
403       \textcolor{keywordflow}{if} (\mbox{\hyperlink{_g_b_8cpp_aad4589c2dc32beaef2c70b2f9af5e54b}{register\_LY}}>\mbox{\hyperlink{_g_b_8cpp_ae85aa77fbabadb9981575f14fc251b50}{oldRegister\_WY}})
404         \mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} = 146;
405       \textcolor{keywordflow}{else}
406         \mbox{\hyperlink{gb_globals_8cpp_a406aa032fac9ced7e3642fad4e0edd44}{gbWindowLine}} = 0;
407     \}
408   \} \textcolor{keywordflow}{else} \{
409     \mbox{\hyperlink{_system_8h_a9e6c91d77e24643b888dbd1a1a590054}{u16}} color = \mbox{\hyperlink{gb_globals_8cpp_abb08650d8f653865820da10dc8e59a8b}{gbColorOption}} ? \mbox{\hyperlink{gb_globals_8cpp_a3c099dd31f1abe974c65df9e99d74793}{gbColorFilter}}[0x7FFF] :
410                 0x7FFF;
411     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{gb_globals_8cpp_aa3e3449c9ba4db2eeb687d6facfca761}{gbCgbMode}})
412     color = \mbox{\hyperlink{gb_globals_8cpp_abb08650d8f653865820da10dc8e59a8b}{gbColorOption}} ? \mbox{\hyperlink{gb_globals_8cpp_a3c099dd31f1abe974c65df9e99d74793}{gbColorFilter}}[\mbox{\hyperlink{gb_globals_8cpp_a7c46bfb4d71e64d27d5aec543ba85b9a}{gbPalette}}[0] & 0x7FFF] :
413             \mbox{\hyperlink{gb_globals_8cpp_a7c46bfb4d71e64d27d5aec543ba85b9a}{gbPalette}}[0] & 0x7FFF;
414     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} = 0; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}} < 160; \mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}++)
415     \{
416       \mbox{\hyperlink{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}{gbLineMix}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}] = color;
417       \mbox{\hyperlink{gb_globals_8cpp_a28491355be3715000cb2fea27dc567d0}{gbLineBuffer}}[\mbox{\hyperlink{expr-lex_8cpp_acb559820d9ca11295b4500f179ef6392}{i}}] = 0;
418     \}
419   \}
420 \}
\end{DoxyCode}
이 함수를 호출하는 함수들에 대한 그래프입니다.\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{gb_gfx_8cpp_a58ad7c6e9c36c06b4b5a778b6a0874e6_icgraph}
\end{center}
\end{figure}


\subsection{변수 문서화}
\mbox{\Hypertarget{gb_gfx_8cpp_a97f094c733e10c52d264471592f505de}\label{gb_gfx_8cpp_a97f094c733e10c52d264471592f505de}} 
\index{gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}!gb\+Invert\+Tab@{gb\+Invert\+Tab}}
\index{gb\+Invert\+Tab@{gb\+Invert\+Tab}!gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}}
\subsubsection{\texorpdfstring{gb\+Invert\+Tab}{gbInvertTab}}
{\footnotesize\ttfamily \mbox{\hyperlink{_system_8h_aed742c436da53c1080638ce6ef7d13de}{u8}} gb\+Invert\+Tab\mbox{[}256\mbox{]}}



gb\+Gfx.\+cpp 파일의 25 번째 라인에서 정의되었습니다.

\mbox{\Hypertarget{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}\label{gb_gfx_8cpp_a3cceb8ec3c715f26209bd0d103425b9a}} 
\index{gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}!gb\+Line\+Mix@{gb\+Line\+Mix}}
\index{gb\+Line\+Mix@{gb\+Line\+Mix}!gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}}
\subsubsection{\texorpdfstring{gb\+Line\+Mix}{gbLineMix}}
{\footnotesize\ttfamily \mbox{\hyperlink{_system_8h_a9e6c91d77e24643b888dbd1a1a590054}{u16}} gb\+Line\+Mix\mbox{[}160\mbox{]}}



gb\+Gfx.\+cpp 파일의 60 번째 라인에서 정의되었습니다.

\mbox{\Hypertarget{gb_gfx_8cpp_a2d5713dc9b90a76348ddf8fc74faa49d}\label{gb_gfx_8cpp_a2d5713dc9b90a76348ddf8fc74faa49d}} 
\index{gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}!gb\+Window\+Color@{gb\+Window\+Color}}
\index{gb\+Window\+Color@{gb\+Window\+Color}!gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}}
\subsubsection{\texorpdfstring{gb\+Window\+Color}{gbWindowColor}}
{\footnotesize\ttfamily \mbox{\hyperlink{_system_8h_a9e6c91d77e24643b888dbd1a1a590054}{u16}} gb\+Window\+Color\mbox{[}160\mbox{]}}



gb\+Gfx.\+cpp 파일의 61 번째 라인에서 정의되었습니다.

\mbox{\Hypertarget{gb_gfx_8cpp_a29995e8cccff0ba14835253b6a3f193d}\label{gb_gfx_8cpp_a29995e8cccff0ba14835253b6a3f193d}} 
\index{gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}!in\+Use\+Register\+\_\+\+WY@{in\+Use\+Register\+\_\+\+WY}}
\index{in\+Use\+Register\+\_\+\+WY@{in\+Use\+Register\+\_\+\+WY}!gb\+Gfx.\+cpp@{gb\+Gfx.\+cpp}}
\subsubsection{\texorpdfstring{in\+Use\+Register\+\_\+\+WY}{inUseRegister\_WY}}
{\footnotesize\ttfamily \mbox{\hyperlink{_util_8cpp_a0ef32aa8672df19503a49fab2d0c8071}{int}} in\+Use\+Register\+\_\+\+WY}



G\+B.\+cpp 파일의 180 번째 라인에서 정의되었습니다.

